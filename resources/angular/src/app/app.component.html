<link rel="stylesheet"
      href="/font-awesome/css/font-awesome.min.css">
<nav class="navbar navbar-default navbar-static-top">
  <div class="container">
    <div class="navbar-header">

      <!-- Collapsed Hamburger -->
      <button type="button"
              class="navbar-toggle collapsed"
              data-toggle="collapse"
              data-target="#app-navbar-collapse"
              aria-expanded="false">
        <span class="sr-only">Toggle Navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <!-- Branding Image -->
      <a class="navbar-brand"
         href="/">
        <img src="/img/logo.png">
      </a>
    </div>

    <div class="collapse navbar-collapse"
         id="app-navbar-collapse">
      <!-- Left Side Of Navbar -->
      <ul class="nav navbar-nav">
        &nbsp;
      </ul>

      <!-- Right Side Of Navbar -->
      <ul class="nav navbar-nav navbar-right">
        <!-- Authentication Links -->
        <li class="hidden-xs">
          <p class="navbar-text">{{ timeNow | async | date:'medium' }}</p>
        </li>
        <li>
          <a href="/logout"
             (click)="logout($event)">Logout</a>
          <form id="logout-form"
                action="/logout"
                method="POST"
                style="display: none;">
          </form>
        </li>
      </ul>
    </div>
  </div>
</nav>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      <div class="panel panel-default">
        <div class="panel-heading clearfix">
          <div class="panel-title pull-left">Available</div>
          <button type="button"
                  (click)="engageNext()"
                  class="btn btn-success pull-right"
                  [class.disabled]="!staff.length">
            Busy
          </button>
          <button type="button"
                  (click)="skip()"
                  class="btn btn-warning btn-margin pull-right"
                  [class.disabled]="!staff.length || staff.length === 1">
            Skip
          </button>
        </div>

        <div class="panel-body clearfix">
          <h1 *ngIf="staff.length"
              class="next-up pull-left">{{ getNextUpName().first_name }} {{ getNextUpName ().last_name }}</h1>
          <h1 *ngIf="!staff.length"
              class="next-up pull-left">No Staff Available</h1>
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-md-6">
      <div class="panel panel-default">
        <div class="panel-heading clearfix">
          <div class="panel-title pull-left">Available</div>

          <button type="button"
                  (click)="addStaff()"
                  class="btn btn-primary pull-right">
            Add Staff
          </button>
          <i *ngIf="!staff.length && !engaged.length"
             class="fa fa-arrow-right fa-2x pull-right bounce"></i>
        </div>

        <div class="panel-body">

          <table class="table">
            <thead>
              <tr>
                <th>#</th>
                <th>Name</th>
                <th>Signed In</th>
                <th></th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let member of staff; let index=index;">
                <th scope="row">{{ index+1 }}</th>
                <td>{{ member.first_name }} {{ member.last_name }}</td>
                <td class="time">{{ member.time_in | date:'mediumTime' }}</td>
                <td>
                  <i (click)="removeStaff(index)"
                     class="fa fa-button fa-danger fa-fw fa-close"></i>
                </td>
              </tr>
            </tbody>
          </table>

        </div>
      </div>
    </div>

    <div class="col-md-6">
      <div class="panel panel-default">
        <div class="panel-heading clearfix">
          <div class="panel-title pull-left">Unavailable</div>
        </div>

        <div class="panel-body">

          <table class="table">
            <thead>
              <tr>
                <th>Name</th>
                <th>Time</th>
                <th></th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let member of engaged; let index=index;">
                <td>{{ member.first_name }} {{ member.last_name }}</td>
                <td class="time">{{ member.engaged_at | date:'mediumTime' }}</td>
                <td>
                  <i (click)="addStaff(member, index)"
                     class="fa fa-button fa-success fa-fw fa-check"></i>
                </td>
              </tr>
            </tbody>
          </table>

        </div>
      </div>
    </div>

  </div>

</div>

<div class="modal fade"
     id="staffModal"
     tabindex="-1"
     role="dialog">
  <div class="modal-dialog"
       role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button"
                class="close"
                data-dismiss="modal"
                aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
        <h4 class="modal-title">Add Staff</h4>
      </div>
      <div class="modal-body">
        <form>
          <div class="form-group">
            <label>First Name</label>
            <input type="text"
                   [(ngModel)]="register.first_name"
                   (keypress)="modalKeyPress($event)"
                   name="first_name"
                   class="form-control"
                   placeholder="John">
          </div>
          <div class="form-group">
            <label>Last Name</label>
            <input type="text"
                   [(ngModel)]="register.last_name"
                   (keypress)="modalKeyPress($event)"
                   name="last_name"
                   class="form-control"
                   placeholder="Smith">
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button"
                class="btn btn-default"
                data-dismiss="modal">Cancel</button>
        <button type="button"
                [class.disabled]="!register.last_name || !register.first_name"
                (click)="registerMember()"
                class="btn btn-success">OK</button>
      </div>
    </div>
    <!-- /.modal-content -->
  </div>
  <!-- /.modal-dialog -->
</div>
<!-- /.modal -->
